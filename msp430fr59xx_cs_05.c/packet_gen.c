/**
 *  Ref: https://github.com/uu-core/educational-backscatter-platform/blob/main/project_pico_libs/packet_generation.c
 *
 */

#include <stdio.h>
#include <string.h>
#include <math.h>
#include "packet_gen.h"
#include <msp430fr5969.h>

#define DEFAULT_SEED 0xABCD
uint32_t seed = DEFAULT_SEED;

#pragma PERSISTENT(FRAM_write)
unsigned long FRAM_write[] = {0xfeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeef, 0xfbaa, 0x9999, 0xaaaa, 0x9777, 0x7777, 0x7788, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x8778, 0x9999, 0x9999, 0x9999, 0x9abc, 0xca87, 0x8888, 0x8888, 0x8888, 0x899e, 0xfa99, 0x9999, 0x9aaa, 0x8656, 0x6666, 0x6677, 0x7788, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x7777, 0x7667, 0x8999, 0x9999, 0x9999, 0x99bd, 0xdb76, 0x7777, 0x7777, 0x7777, 0x776d, 0xfa99, 0x9999, 0xaaaa, 0x8656, 0x6666, 0x6677, 0x7778, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x8878, 0x8777, 0x7767, 0x8999, 0x9999, 0x9999, 0x99ac, 0xdda7, 0x6777, 0x7777, 0x7777, 0x644d, 0xfa99, 0x9999, 0xaaa9, 0x8656, 0x6666, 0x6677, 0x7778, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x8888, 0x8887, 0x8877, 0x7766, 0x799a, 0xaaa9, 0x9999, 0x999a, 0xddc8, 0x6777, 0x7777, 0x7886, 0x323d, 0xfa99, 0x999a, 0xaaa9, 0x8655, 0x6666, 0x6677, 0x7778, 0x8888, 0x8888, 0x8888, 0x8888, 0x8878, 0x8888, 0x8787, 0x7777, 0x7766, 0x789a, 0xaaaa, 0x9999, 0x9999, 0xbdda, 0x7677, 0x7777, 0x8863, 0x224d, 0xfa99, 0x999a, 0xaa99, 0x8655, 0x6666, 0x6677, 0x7777, 0x8888, 0x8888, 0x8888, 0x7777, 0x7777, 0x8888, 0x7777, 0x7777, 0x7766, 0x7899, 0xa9a9, 0x9999, 0x9999, 0xacdc, 0x8677, 0x7777, 0x8632, 0x224d, 0xfa99, 0xaaaa, 0xa999, 0x8656, 0x6666, 0x6677, 0x7777, 0x7778, 0x8888, 0x8888, 0x7777, 0x7777, 0x8888, 0x7777, 0x7777, 0x7776, 0x7899, 0x9999, 0x9999, 0x9999, 0x9bdd, 0xb767, 0x7777, 0x6323, 0x224d, 0xfa9a, 0xaaaa, 0xa999, 0x8656, 0x6666, 0x6677, 0x7777, 0x7778, 0x8778, 0x8887, 0x7777, 0x7777, 0x7887, 0x7777, 0x7777, 0x7776, 0x7899, 0x9999, 0x9999, 0x9999, 0x9acd, 0xda66, 0x7776, 0x3233, 0x324d, 0xfa9a, 0xaaa9, 0x9999, 0x8655, 0x6666, 0x6677, 0x7777, 0x7787, 0x7778, 0x8887, 0x7777, 0x7777, 0x7887, 0x7787, 0x7777, 0x7776, 0x7889, 0x9999, 0x9999, 0x9999, 0x89bd, 0xdc86, 0x7763, 0x2233, 0x323d, 0xfa9a, 0xa999, 0x9a99, 0x8655, 0x6666, 0x6677, 0x7777, 0x7788, 0x7788, 0x7788, 0x8889, 0xaa99, 0x8777, 0x7887, 0x7777, 0x7766, 0x7889, 0x9999, 0x9999, 0x9998, 0x88ac, 0xdda7, 0x7632, 0x2333, 0x323d, 0xfa9a, 0xa989, 0x9aa9, 0x8655, 0x6666, 0x6677, 0x7777, 0x7878, 0x7788, 0x7888, 0x99aa, 0xbbbb, 0xba98, 0x7778, 0x7777, 0x7766, 0x7889, 0x9999, 0x9999, 0x9988, 0x889a, 0xddc9, 0x6322, 0x3333, 0x223d, 0xfaaa, 0xa878, 0x9aa9, 0x8655, 0x6666, 0x6677, 0x7777, 0x7777, 0x7888, 0x7888, 0x999a, 0xaabb, 0xbbbb, 0x9777, 0x7777, 0x7766, 0x7889, 0x9999, 0x9999, 0x9988, 0x8889, 0xcdda, 0x4223, 0x3333, 0x323d, 0xfaaa, 0x9768, 0xaaaa, 0x8645, 0x5666, 0x6667, 0x7777, 0x7778, 0x7887, 0x7888, 0x899a, 0xaabb, 0xbbbc, 0xba87, 0x7777, 0x7666, 0x6899, 0x9999, 0x9988, 0x9888, 0x8888, 0xadd9, 0x3223, 0x3323, 0x224d, 0xfba9, 0x8568, 0xaaa9, 0x8645, 0x5666, 0x6667, 0x7777, 0x7777, 0x7777, 0x7888, 0x8899, 0xaabb, 0xbbbc, 0xccb8, 0x6677, 0x7666, 0x6899, 0x9988, 0x9988, 0x9888, 0x8999, 0x9ba4, 0x2233, 0x3232, 0x333d, 0xfba8, 0x6468, 0xaaa9, 0x8645, 0x5666, 0x6667, 0x7777, 0x7787, 0x7777, 0x7788, 0x8899, 0xaabb, 0xbbbc, 0xcccc, 0x9766, 0x6666, 0x6899, 0x9988, 0x8989, 0x9889, 0x9999, 0x9842, 0x2333, 0x2333, 0x334d, 0xfa97, 0x5568, 0xaaa9, 0x8645, 0x5666, 0x6667, 0x7777, 0x7786, 0x6777, 0x7788, 0x8889, 0xaabb, 0xbbbb, 0xcccc, 0xdb86, 0x6666, 0x6899, 0x9986, 0x7899, 0x9888, 0x9999, 0x8422, 0x2332, 0x3333, 0x347e, 0xfa86, 0x5568, 0xaaa9, 0x8645, 0x5666, 0x6667, 0x7777, 0x7766, 0x7777, 0x7788, 0x8889, 0x9abb, 0xbbbc, 0xccdd, 0xddb6, 0x5666, 0x6899, 0x9985, 0x5799, 0x9988, 0x8998, 0x5223, 0x3323, 0x3334, 0x579e, 0xe965, 0x5568, 0xaaa9, 0x8645, 0x5666, 0x6667, 0x7777, 0x7666, 0x7777, 0x7788, 0x8889, 0x9aba, 0xbbcc, 0xcccc, 0xddda, 0x5555, 0x6899, 0x9985, 0x3689, 0x9888, 0x8996, 0x3223, 0x3233, 0x2345, 0x798d, 0xe855, 0x5568, 0x9aa9, 0x8645, 0x6666, 0x6667, 0x7777, 0x7667, 0x7767, 0x7888, 0x8888, 0x9aab, 0xcccc, 0xcccc, 0xdddd, 0x9555, 0x6899, 0x9985, 0x3578, 0x9888, 0x9984, 0x2233, 0x2333, 0x3357, 0x999e, 0xe855, 0x5568, 0x9aa9, 0x8645, 0x5666, 0x6667, 0x7777, 0x7767, 0x7777, 0x8888, 0x8888, 0x99bc, 0xcccc, 0xcccc, 0xcddd, 0xda55, 0x6899, 0x9985, 0x3368, 0x9889, 0x9852, 0x2333, 0x2323, 0x3478, 0x999e, 0xe755, 0x5568, 0x9aa9, 0x8645, 0x5666, 0x6667, 0x7787, 0x6677, 0x7778, 0x8888, 0x8888, 0x9acc, 0xcccc, 0xcccc, 0xcccd, 0xdd95, 0x5899, 0x9985, 0x3246, 0x8889, 0x9632, 0x3333, 0x3333, 0x3688, 0x9a9e, 0xe855, 0x5568, 0x9aa9, 0x8655, 0x5666, 0x6667, 0x7786, 0x6667, 0x7778, 0x8888, 0x878a, 0xbbbb, 0xbbcc, 0xcccc, 0xcccc, 0xddc7, 0x5799, 0x9985, 0x3224, 0x8aaa, 0x8422, 0x3333, 0x3333, 0x5889, 0x9a9e, 0xe855, 0x5568, 0x9aa9, 0x8645, 0x5566, 0x6666, 0x6796, 0x6667, 0x7788, 0x8887, 0x78ab, 0xbbbb, 0xbccc, 0xcccc, 0xcccc, 0xddda, 0x5799, 0x9985, 0x3237, 0xbccd, 0x9323, 0x3333, 0x3324, 0x8999, 0xaa9e, 0xe855, 0x5568, 0x9aa9, 0x8544, 0x5666, 0x6666, 0x6996, 0x6677, 0x7777, 0x7877, 0x8aaa, 0xbabb, 0xbbcc, 0xbccc, 0xcccc, 0xccdc, 0x6799, 0x9985, 0x239b, 0xcddd, 0xc423, 0x3332, 0x3337, 0x999a, 0xa99e, 0xe855, 0x5568, 0x9aa9, 0x8645, 0x5666, 0x6666, 0x6b86, 0x6667, 0x7777, 0x8778, 0xaaaa, 0xabbb, 0xbbbb, 0xcccc, 0xcccc, 0xcccd, 0xa789, 0x9975, 0x49bb, 0xdddd, 0xc523, 0x3222, 0x3359, 0x9999, 0x999e, 0xe856, 0x6668, 0x9aaa, 0x8645, 0x5666, 0x6666, 0x7c86, 0x6667, 0x7778, 0x7789, 0xaaaa, 0xbbbb, 0xbbbb, 0xcccc, 0xcbbc, 0xcccc, 0xcb99, 0x9988, 0xaccd, 0xcccd, 0xc523, 0x2223, 0x2489, 0x9999, 0x999e, 0xe866, 0x6668, 0x9aaa, 0x8655, 0x5666, 0x6666, 0x8b76, 0x6667, 0x7777, 0x7899, 0x99aa, 0xabbb, 0xabbb, 0xbbbc, 0xbbbc, 0xcccc, 0xccb9, 0x9aab, 0xcccc, 0xccdd, 0xc423, 0x3223, 0x3799, 0x9999, 0x999e, 0xe866, 0x6668, 0x9aaa, 0x8645, 0x5666, 0x6666, 0xab86, 0x6666, 0x7777, 0x8998, 0x9aaa, 0xaaaa, 0xabbb, 0xbbbb, 0xbbbc, 0xcbbb, 0xbcba, 0xabcc, 0xcccc, 0xccdd, 0xb333, 0x2233, 0x5899, 0xa999, 0x999d, 0xe866, 0x6668, 0xaaaa, 0x8645, 0x5666, 0x6666, 0xbb87, 0x6667, 0x7778, 0x9888, 0x99aa, 0xaaaa, 0xabaa, 0xbbbb, 0xbbbb, 0xbbbb, 0xbbbb, 0xcccc, 0xcccc, 0xccdd, 0x9222, 0x2234, 0x7999, 0xa999, 0x999d, 0xe856, 0x5668, 0xaaaa, 0x8645, 0x5666, 0x6666, 0xbb98, 0x7666, 0x7788, 0x8889, 0x99aa, 0x9aaa, 0xaaaa, 0xabbb, 0xbbbb, 0xbaba, 0xabbb, 0xcccc, 0xcccc, 0xbbcd, 0x6223, 0x2336, 0x899a, 0xa999, 0x999d, 0xe855, 0x5568, 0xaaaa, 0x8645, 0x5666, 0x6666, 0xbb98, 0x7666, 0x7888, 0x8899, 0x9999, 0xaaaa, 0xaaaa, 0xaaaa, 0xbbba, 0xbaab, 0xbbcc, 0xcccc, 0xcccb, 0xaaba, 0x3232, 0x2358, 0x99aa, 0xa999, 0x999d, 0xe855, 0x5568, 0xaaaa, 0x8645, 0x5666, 0x6666, 0xbb99, 0x8667, 0x8887, 0x8888, 0x9999, 0x9aaa, 0xaa9a, 0xaaaa, 0xaaaa, 0xaabb, 0xcccc, 0xcccc, 0xccca, 0xa9b7, 0x2232, 0x2379, 0x9999, 0x9999, 0x999d, 0xe856, 0x5678, 0xaaaa, 0x9645, 0x5666, 0x6656, 0xbba9, 0x8767, 0x8878, 0x8888, 0x9999, 0x8998, 0x899a, 0xaaaa, 0xaa9a, 0xabbc, 0xcbbc, 0xcccc, 0xcca9, 0x89a4, 0x2333, 0x3489, 0x9999, 0x9999, 0x999e, 0xe866, 0x6678, 0xaaaa, 0x9645, 0x5566, 0x6656, 0xcba9, 0x9777, 0x8788, 0x8888, 0x8988, 0x7679, 0x8789, 0x9897, 0x79aa, 0xbccc, 0xbccc, 0xcccc, 0xcb96, 0x6a93, 0x2223, 0x3699, 0x9999, 0x9999, 0x999e, 0xe866, 0x6678, 0xaaaa, 0x9645, 0x5566, 0x6656, 0xbcb9, 0x8777, 0x7788, 0x7888, 0x8887, 0x6558, 0x8765, 0x5533, 0x59ab, 0xcccc, 0xcccc, 0xcccc, 0xa756, 0x8b52, 0x3223, 0x4899, 0xaaa9, 0x9999, 0x999d, 0xe866, 0x6678, 0xaaaa, 0x9645, 0x5666, 0x6655, 0xbcb9, 0x8777, 0x7887, 0x8888, 0x8777, 0x6546, 0x6555, 0x4324, 0x8abc, 0xcccc, 0xcccc, 0xcc97, 0x6679, 0x9633, 0x2333, 0x699a, 0xaaa9, 0x9999, 0x999e, 0xe866, 0x6678, 0xaaaa, 0x9645, 0x5666, 0x6655, 0x9cb9, 0x8877, 0x8877, 0x8888, 0x7765, 0x4345, 0x5554, 0x4358, 0xabbb, 0xbbbc, 0xcccb, 0xa966, 0x78aa, 0x6323, 0x2334, 0x899a, 0xaaa9, 0x9999, 0x999d, 0xe866, 0x6678, 0xaaaa, 0x9645, 0x5666, 0x6665, 0x7cba, 0x9877, 0x8777, 0x7778, 0x6544, 0x3355, 0x4543, 0x468a, 0xbbbb, 0xbbbb, 0xcb97, 0x6789, 0xaaa6, 0x3333, 0x2336, 0x89aa, 0xaaa9, 0x9999, 0x999d, 0xe866, 0x6678, 0xaaaa, 0x9645, 0x5566, 0x6666, 0x5bca, 0x9777, 0x7777, 0x8865, 0x5433, 0x2343, 0x4544, 0x68ab, 0xbbbb, 0xbbbb, 0xb856, 0x779a, 0xba52, 0x2333, 0x2347, 0x89aa, 0xaaa9, 0x9999, 0x999d, 0xe866, 0x6668, 0xaaaa, 0x9645, 0x5555, 0x5666, 0x67cb, 0xa887, 0x7777, 0x7654, 0x4434, 0x3333, 0x3446, 0x7acb, 0xbbba, 0xbbbb, 0xb855, 0x678a, 0x9522, 0x3333, 0x2357, 0x8aaa, 0xaaaa, 0xa999, 0x999d, 0xe866, 0x6668, 0xaaaa, 0x9645, 0x5566, 0x6666, 0x66ac, 0xa877, 0x7777, 0x7544, 0x5334, 0x3333, 0x3457, 0x9bbb, 0xbbaa, 0xbbbc, 0xca65, 0x5788, 0x4223, 0x3332, 0x3368, 0x9aaa, 0xaaaa, 0xaa99, 0x999d, 0xe866, 0x6568, 0xaaaa, 0x9645, 0x5666, 0x6666, 0x66ac, 0xa777, 0x7776, 0x5433, 0x4434, 0x4222, 0x3568, 0xabba, 0xaaaa, 0xbccc, 0xcb74, 0x4687, 0x3233, 0x3322, 0x3478, 0x9aaa, 0xaaaa, 0xaa99, 0x999d, 0xe866, 0x6568, 0xaaaa, 0x9645, 0x5666, 0x6667, 0x669c, 0x8777, 0x7775, 0x3322, 0x4444, 0x6323, 0x5799, 0xbbaa, 0xaaab, 0xbccc, 0xcc84, 0x3487, 0x3233, 0x3322, 0x3688, 0x99aa, 0xaaaa, 0xaa99, 0x999d, 0xe866, 0x6668, 0xaaaa, 0x9645, 0x5666, 0x6677, 0x768b, 0x8767, 0x7544, 0x3333, 0x3344, 0x6226, 0x8aa9, 0xabaa, 0xaaab, 0xcccc, 0xdc95, 0x3377, 0x3333, 0x3323, 0x3789, 0x9999, 0x9999, 0x9999, 0x999e, 0xe866, 0x6568, 0x9aaa, 0x9645, 0x5666, 0x6677, 0x777a, 0x8777, 0x6532, 0x3333, 0x3345, 0x5458, 0xabaa, 0xbba9, 0xaabb, 0xcccc, 0xdda6, 0x3367, 0x3333, 0x3232, 0x5899, 0x9999, 0x9999, 0x9999, 0x999e, 0xe866, 0x6568, 0x9aaa, 0x9655, 0x5666, 0x6677, 0x7778, 0x7777, 0x5342, 0x3433, 0x3333, 0x2679, 0xabba, 0xaaaa, 0xaabb, 0xcccc, 0xddb7, 0x3257, 0x3333, 0x3333, 0x789a, 0xaa99, 0x9999, 0x9999, 0x999d, 0xe866, 0x6568, 0xaaaa, 0x9645, 0x5666, 0x6677, 0x7776, 0x7875, 0x4352, 0x3432, 0x3333, 0x479a, 0xabba, 0x8899, 0xabbb, 0xcccc, 0xcdb7, 0x3247, 0x4333, 0x3334, 0x889a, 0xaaaa, 0xa999, 0x9998, 0x898d, 0xe866, 0x6568, 0xaaaa, 0x9645, 0x5666, 0x6667, 0x7863, 0x6854, 0x4362, 0x3332, 0x3433, 0x69ab, 0xaba8, 0x7766, 0x8aab, 0xbbbc, 0xba86, 0x3247, 0x4333, 0x3336, 0x89a9, 0x9999, 0x9999, 0x9999, 0x888d, 0xe866, 0x6568, 0xaaaa, 0x9645, 0x5666, 0x6667, 0x9975, 0x6544, 0x4453, 0x3332, 0x2335, 0x9abb, 0xb977, 0x7766, 0x68aa, 0xbbba, 0x8666, 0x4237, 0x5333, 0x3347, 0x89a9, 0x9999, 0x9999, 0x9999, 0x988d, 0xe866, 0x6568, 0xaaba, 0x9645, 0x5666, 0x6678, 0x9997, 0x4345, 0x4433, 0x3243, 0x2248, 0xabcb, 0x8543, 0x3435, 0x779a, 0xbcb8, 0x5433, 0x3237, 0x5333, 0x3348, 0x8999, 0x9999, 0x9999, 0x9999, 0x988d, 0xe855, 0x5558, 0xaaba, 0x9645, 0x5666, 0x56a9, 0x9864, 0x3444, 0x5433, 0x4234, 0x3369, 0xabb9, 0x5333, 0x4764, 0x6789, 0xbc84, 0x4643, 0x3237, 0x5432, 0x3358, 0x9999, 0x9999, 0x9999, 0x9998, 0x888d, 0xe865, 0x5558, 0xaaba, 0x9655, 0x6666, 0x559a, 0x9543, 0x4444, 0x6423, 0x3322, 0x247a, 0xbca7, 0x5355, 0x6ab6, 0x6789, 0xcb65, 0x5863, 0x2246, 0x6433, 0x3368, 0x9999, 0x9999, 0x9999, 0x9988, 0x888e, 0xe866, 0x5557, 0xabbb, 0x9755, 0x6664, 0x5799, 0x6444, 0x3445, 0x6532, 0x3322, 0x269b, 0xca88, 0x8667, 0x8aa8, 0x7789, 0xcb77, 0x8853, 0x3346, 0x6432, 0x3478, 0x9999, 0x9999, 0x9999, 0x8888, 0x9aae, 0xe866, 0x5557, 0xabbb, 0x9755, 0x6666, 0x8865, 0x3465, 0x3455, 0x7632, 0x2222, 0x48ab, 0x9688, 0x9887, 0x8899, 0x8889, 0xcc98, 0x7654, 0x3346, 0x6432, 0x3589, 0x9999, 0x9999, 0x9988, 0x889a, 0xbbae, 0xe855, 0x5447, 0x9bbb, 0x9755, 0x6679, 0x8543, 0x3466, 0x3445, 0x6642, 0x2222, 0x79ba, 0x6789, 0x9999, 0x9aa9, 0x8889, 0xcca9, 0x8765, 0x3346, 0x7433, 0x3689, 0x9999, 0x9999, 0x9888, 0x8abc, 0xbbae, 0xe855, 0x4447, 0x9abb, 0x9755, 0x6778, 0x7543, 0x4654, 0x2356, 0x6543, 0x2225, 0x7aa6, 0x6789, 0x9aaa, 0xaaa9, 0x8888, 0xbca9, 0x8875, 0x3346, 0x7323, 0x4789, 0x9999, 0x9999, 0x9888, 0xabcc, 0xbbbe, 0xe755, 0x4447, 0x9abb, 0x9755, 0x6777, 0x5444, 0x5653, 0x2245, 0x4474, 0x2237, 0x9b64, 0x6789, 0x9aab, 0xbaa9, 0x9888, 0xbcb9, 0x8875, 0x3345, 0x7333, 0x4899, 0x9999, 0x9999, 0x888a, 0xbccc, 0xccbe, 0xe744, 0x4447, 0x9aba, 0x9755, 0x6666, 0x5554, 0x5643, 0x3233, 0x3476, 0x2257, 0xb944, 0x6788, 0x9aab, 0xaaa9, 0x8888, 0xbcb9, 0x9875, 0x3345, 0x8433, 0x5899, 0x9999, 0x9998, 0x889b, 0xcccc, 0xccbe, 0xe744, 0x4347, 0x9aaa, 0x9746, 0x6774, 0x6644, 0x5743, 0x3223, 0x3576, 0x436a, 0xb634, 0x6788, 0x99aa, 0xaaa9, 0x8878, 0xacb9, 0x9874, 0x3345, 0x8433, 0x7899, 0x9999, 0x9988, 0x88ac, 0xcccc, 0xccbe, 0xe744, 0x4337, 0x9aaa, 0x9646, 0x7755, 0x6545, 0x6753, 0x2235, 0x5783, 0x348b, 0x8234, 0x6788, 0x999a, 0xaa98, 0x8877, 0xacb9, 0x8863, 0x3444, 0x8523, 0x7999, 0x9999, 0x9988, 0x89bc, 0xcccc, 0xccbe, 0xe744, 0x4337, 0x9aaa, 0x9746, 0x7755, 0x5555, 0x5753, 0x3235, 0x6542, 0x4799, 0x3245, 0x6788, 0x8999, 0xa998, 0x7887, 0x9cb9, 0x8753, 0x3434, 0x8625, 0x8999, 0x9999, 0x9988, 0x8acc, 0xcccc, 0xcdbe, 0xe744, 0x4347, 0x9aaa, 0x9756, 0x6655, 0x6454, 0x5664, 0x3324, 0x5422, 0x7a96, 0x2245, 0x6778, 0x8999, 0x9998, 0x7777, 0x8ba9, 0x8742, 0x3434, 0x8636, 0x9999, 0x9999, 0x9988, 0x9bcc, 0xcccc, 0xcdbe, 0xe744, 0x4458, 0x9aaa, 0x9755, 0x6655, 0x5454, 0x6675, 0x3533, 0x5444, 0x8a73, 0x2245, 0x6778, 0x8999, 0x9999, 0x8777, 0x8aa9, 0x8632, 0x3433, 0x8748, 0x9999, 0x9999, 0x9988, 0xaccc, 0xcccd, 0xddbe, 0xe744, 0x4458, 0xaaaa, 0x9755, 0x6744, 0x4544, 0x6676, 0x3653, 0x4688, 0x8832, 0x3356, 0x6778, 0x8899, 0x9999, 0x9899, 0xbb98, 0x8523, 0x4433, 0x7759, 0x9999, 0x9999, 0x9888, 0xaccc, 0xcccd, 0xddbe, 0xe744, 0x4468, 0xaaaa, 0xa745, 0x6754, 0x5434, 0x5667, 0x5543, 0x69a6, 0x7433, 0x3356, 0x6778, 0x8889, 0x9999, 0x99bb, 0xcb98, 0x7323, 0x4433, 0x6779, 0x9999, 0x9999, 0x9888, 0xaccd, 0xcccd, 0xddbe, 0xe744, 0x4458, 0xaaaa, 0xa745, 0x7656, 0x4344, 0x4556, 0x7446, 0x8a76, 0x5333, 0x3346, 0x6788, 0x8888, 0x8999, 0x99bb, 0xba98, 0x4233, 0x4433, 0x6789, 0x9999, 0x9999, 0x9888, 0xbccd, 0xdccd, 0xddbe, 0xe733, 0x4458, 0xaaab, 0xa746, 0x6645, 0x3335, 0x5555, 0x6479, 0xb877, 0x3333, 0x3345, 0x6788, 0x8888, 0x7788, 0x8889, 0x8887, 0x3333, 0x4443, 0x5889, 0x9999, 0x9999, 0x9889, 0xbcdd, 0xdddd, 0xddce, 0xe633, 0x3468, 0xaabb, 0xa766, 0x6743, 0x3446, 0x5555, 0x568a, 0xa774, 0x2333, 0x3345, 0x5777, 0x8888, 0x7677, 0x7789, 0x7785, 0x3333, 0x4433, 0x5899, 0x9999, 0x9999, 0x9889, 0xbddd, 0xdddd, 0xddce, 0xe633, 0x3468, 0xaabb, 0xa855, 0x7654, 0x2447, 0x5565, 0x6889, 0x8853, 0x3233, 0x3334, 0x5677, 0x7888, 0x8777, 0x89aa, 0x8873, 0x2233, 0x4433, 0x5899, 0x9999, 0x9999, 0x9889, 0xcddd, 0xdddd, 0xddbe, 0xe633, 0x3468, 0xabbb, 0xa746, 0x7553, 0x3457, 0x6556, 0x7889, 0x9633, 0x3333, 0x3334, 0x4567, 0x7888, 0x8888, 0x7888, 0x9852, 0x3333, 0x4543, 0x4899, 0x9999, 0x9999, 0x8889, 0xcddd, 0xdddd, 0xccbe, 0xe633, 0x3568, 0x9abb, 0xa746, 0x6443, 0x3447, 0x6766, 0x678a, 0x8433, 0x3333, 0x3334, 0x3456, 0x7788, 0x8888, 0x8889, 0x8632, 0x3333, 0x4544, 0x4899, 0x9999, 0x9999, 0x8879, 0xcddd, 0xdddc, 0xddbe, 0xe622, 0x3568, 0x9aba, 0xa746, 0x5443, 0x3346, 0x6776, 0x6668, 0x4333, 0x3333, 0x3333, 0x3445, 0x6788, 0x8899, 0xaaa9, 0x8432, 0x3333, 0x4544, 0x4899, 0x9999, 0x9999, 0x8879, 0xdddd, 0xdddd, 0xddbe, 0xe622, 0x3568, 0x9aba, 0xa745, 0x5443, 0x3346, 0x4677, 0x7755, 0x3333, 0x3333, 0x2333, 0x3334, 0x5778, 0x899a, 0xaaa9, 0x7333, 0x3333, 0x5544, 0x4899, 0x9999, 0x9998, 0x887a, 0xdddd, 0xdddc, 0xccae, 0xe622, 0x3468, 0x9aaa, 0xa746, 0x4343, 0x3336, 0x4567, 0x7975, 0x3333, 0x3333, 0x2333, 0x3333, 0x3456, 0x7899, 0xa998, 0x6333, 0x3333, 0x5544, 0x5898, 0x8999, 0x9998, 0x888b, 0xdddd, 0xddcb, 0x965d, 0xe632, 0x2457, 0x9aaa, 0x9787, 0x5343, 0x3337, 0x7456, 0x7877, 0x5334, 0x3333, 0x3333, 0x3344, 0x6678, 0x8899, 0x9aaa, 0x8543, 0x3333, 0x5544, 0x5877, 0x7778, 0x8888, 0x878c, 0xdddd, 0xcca6, 0x324d, 0xe743, 0x2347, 0x9aaa, 0xa865, 0x4344, 0x3435, 0x7557, 0x6766, 0x7533, 0x3333, 0x3333, 0x3346, 0x7778, 0x8899, 0x99ab, 0xcb97, 0x5323, 0x5544, 0x6877, 0x7777, 0x7777, 0x778c, 0xdddc, 0xca63, 0x345d, 0xf965, 0x4336, 0x9aaa, 0xa766, 0x3244, 0x3543, 0x6666, 0x5677, 0x7543, 0x3332, 0x3333, 0x3346, 0x7778, 0x8888, 0x99ab, 0xcccc, 0xb733, 0x4444, 0x6888, 0x8877, 0x6666, 0x667b, 0xcdcc, 0xa634, 0x455d, 0xf987, 0x6435, 0x9aaa, 0x9875, 0x2245, 0x4544, 0x4554, 0x5687, 0x6563, 0x3333, 0x3333, 0x4346, 0x7778, 0x8888, 0x99ab, 0xbbcc, 0xcc94, 0x4444, 0x6898, 0x8888, 0x7766, 0x767c, 0xddca, 0x5444, 0x555d, 0xf989, 0x8635, 0x9aaa, 0xaa83, 0x2333, 0x4344, 0x3544, 0x5688, 0x6665, 0x2333, 0x3333, 0x4536, 0x7778, 0x8888, 0x9aab, 0xbbcc, 0xcdc9, 0x4344, 0x6999, 0x8888, 0x8777, 0x779c, 0xddc7, 0x4555, 0x656d, 0xe769, 0x9745, 0x9aaa, 0xa962, 0x2333, 0x3433, 0x3344, 0x5578, 0x7657, 0x2333, 0x3333, 0x5635, 0x7788, 0x8889, 0x9aaa, 0xabbc, 0xccdd, 0x8333, 0x6999, 0x8888, 0x8877, 0x88ad, 0xdda6, 0x5556, 0x656d, 0xe648, 0xa845, 0x9aba, 0xa952, 0x2333, 0x3433, 0x4344, 0x5567, 0x8568, 0x3333, 0x2333, 0x5645, 0x7888, 0x8889, 0x99aa, 0xabbc, 0xccdd, 0xc533, 0x7899, 0x9888, 0x8877, 0x89cd, 0xdc95, 0x5566, 0x566d, 0xe637, 0xa945, 0x9abb, 0xa852, 0x3322, 0x3533, 0x3444, 0x6557, 0x8559, 0x3343, 0x3333, 0x6645, 0x7888, 0x8889, 0x999a, 0xabbb, 0xccdd, 0xd923, 0x7999, 0x9888, 0x8878, 0xabcd, 0xdb75, 0x5665, 0x566d, 0xe637, 0xa945, 0x9abb, 0xa853, 0x3322, 0x4533, 0x3334, 0x5547, 0x8668, 0x3343, 0x3334, 0x6645, 0x7888, 0x8889, 0x999a, 0xaabb, 0xccdd, 0xdd43, 0x7999, 0x8888, 0x877a, 0xccdd, 0xc955, 0x6665, 0x666d, 0xe526, 0xa945, 0x9abb, 0xa843, 0x2223, 0x5433, 0x3233, 0x4658, 0x8795, 0x3333, 0x3335, 0x7746, 0x7888, 0x8888, 0x999a, 0xaabb, 0xcccd, 0xdd83, 0x7999, 0x8888, 0x878b, 0xdddd, 0xb765, 0x6655, 0x666d, 0xe526, 0xa954, 0x9aaa, 0xa843, 0x2233, 0x3433, 0x3233, 0x3477, 0x6686, 0x4443, 0x3346, 0x7746, 0x7888, 0x8888, 0x8999, 0xaabb, 0xcccd, 0xddb4, 0x7988, 0x8888, 0x878b, 0xdcdc, 0xa766, 0x6656, 0x655d, 0xe526, 0xa954, 0x9aba, 0xa842, 0x2233, 0x3433, 0x3234, 0x3467, 0x6544, 0x4454, 0x3357, 0x7657, 0x8888, 0x8888, 0x8999, 0xaaab, 0xcccd, 0xddc6, 0x8998, 0x8888, 0x878b, 0xccdc, 0x8766, 0x6556, 0x556d, 0xe625, 0x9955, 0x8abb, 0xa843, 0x2333, 0x3333, 0x3234, 0x4566, 0x5653, 0x3333, 0x3357, 0x7657, 0x8888, 0x8888, 0x8999, 0x9aab, 0xbccc, 0xddc9, 0x8888, 0x8888, 0x888a, 0xbcdb, 0x7665, 0x5565, 0x556d, 0xe625, 0x9965, 0x8aab, 0xa853, 0x2332, 0x3333, 0x3333, 0x4445, 0x4574, 0x3332, 0x3467, 0x7468, 0x8888, 0x8888, 0x8999, 0x9aab, 0xbccc, 0xddda, 0x7678, 0x8888, 0x8888, 0xadda, 0x7655, 0x5565, 0x555d, 0xe624, 0x9a65, 0x8aab, 0xa853, 0x2323, 0x3333, 0x2234, 0x5633, 0x3562, 0x2222, 0x3567, 0x6478, 0x8898, 0x8888, 0x8999, 0x9aaa, 0xbbcc, 0xdddb, 0x6455, 0x6778, 0x8988, 0xadc9, 0x6555, 0x5655, 0x654d, 0xe624, 0x9a75, 0x8aab, 0xa853, 0x2233, 0x3333, 0x2333, 0x5765, 0x5433, 0x2222, 0x4676, 0x3578, 0x8888, 0x8888, 0x8899, 0x99aa, 0xbbcc, 0xcddc, 0x6554, 0x4445, 0x6899, 0xbda6, 0x4555, 0x5556, 0x544d, 0xe635, 0x9b85, 0x8aab, 0xa753, 0x2233, 0x3333, 0x3233, 0x3586, 0x5422, 0x2223, 0x5665, 0x4788, 0x8888, 0x8888, 0x8889, 0x99aa, 0xabcc, 0xcddc, 0x8565, 0x5432, 0x38ba, 0xcc84, 0x4456, 0x5556, 0x544d, 0xe756, 0x9b96, 0x8abb, 0xa752, 0x3323, 0x2333, 0x3233, 0x3467, 0x6422, 0x2234, 0x6654, 0x6788, 0x8888, 0x8888, 0x8889, 0x999a, 0xabbc, 0xcddd, 0x9666, 0x5543, 0x38cb, 0xca53, 0x4456, 0x5566, 0x544d, 0xe757, 0x9b96, 0x8abb, 0xa752, 0x2333, 0x2343, 0x4233, 0x3446, 0x5322, 0x2245, 0x5545, 0x7888, 0x8888, 0x8888, 0x8888, 0x999a, 0xaabc, 0xccdd, 0xb666, 0x6554, 0x48cb, 0x8534, 0x4565, 0x4566, 0x544d, 0xe756, 0x8a96, 0x8abb, 0xa742, 0x3333, 0x3344, 0x5333, 0x4446, 0x4322, 0x2333, 0x3567, 0x7888, 0x8888, 0x8998, 0x8888, 0x9999, 0xaabb, 0xccdd, 0xc756, 0x6656, 0x68a8, 0x5444, 0x5654, 0x4665, 0x444d, 0xe635, 0x8a97, 0x8abb, 0xa632, 0x2333, 0x3344, 0x6534, 0x3446, 0x5322, 0x2345, 0x6777, 0x8888, 0x8888, 0x8999, 0x9888, 0x9999, 0xaabb, 0xcccd, 0xd855, 0x6666, 0x6775, 0x5545, 0x6544, 0x5765, 0x434d, 0xe634, 0x7ba8, 0x8abb, 0xa633, 0x2333, 0x4343, 0x5645, 0x3445, 0x5322, 0x3466, 0x7777, 0x8888, 0x8888, 0x8899, 0x9999, 0x9999, 0xaaab, 0xbccd, 0xd955, 0x6677, 0x7666, 0x6555, 0x5445, 0x6764, 0x334d, 0xe633, 0x8cb9, 0x8abb, 0x9632, 0x3334, 0x3443, 0x5544, 0x4344, 0x5423, 0x4567, 0x7777, 0x8888, 0x8888, 0x8889, 0x9999, 0x9999, 0xaaab, 0xbccc, 0xdb55, 0x6677, 0x7777, 0x6555, 0x5456, 0x7643, 0x335d, 0xf855, 0x8bb9, 0x9abb, 0xa755, 0x5566, 0x6666, 0x6676, 0x6566, 0x6766, 0x7788, 0x8888, 0x9999, 0x9999, 0x9999, 0x9999, 0x99aa, 0xaaaa, 0xbbbc, 0xcb87, 0x7788, 0x8888, 0x8766, 0x7678, 0x8765, 0x567e, 0xfeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeee, 0xeeef};


// uint8_t packet_hdr_1352[HEADER_LEN] = {0xaa, 0xaa, 0xaa, 0xaa, 0xd3, 0x91, 0xd3, 0x91, 0x00, 0x00};    // CC2500, the last two byte one for the payload length. and another is seq number
uint8_t packet_hdr_2500[HEADER_LEN] = {0xaa, 0xaa, 0xaa, 0xaa, 0x93, 0x0b, 0x51, 0xde, 0x00, 0x00};    // CC1352P7, the last two byte one for the payload length. and another is seq number
uint8_t packet_hdr_1352[HEADER_LEN] = {0xaa, 0xaa, 0xaa, 0xaa, 0x93, 0x0b, 0x51, 0xde, 0x00, 0x00};    // CC1352P7, the last two byte one for the payload length. and another is seq number

int image_counter_1 = -1;
/*
 * obtain the packet header template for the corresponding radio
 * buffer: array of size HEADER_LEN
 * receiver: radio number (2500 or 1352)
 */
uint8_t *packet_hdr_template(uint16_t receiver){
    if(receiver == 2500){
        return packet_hdr_2500;
    }else{
        return packet_hdr_1352;
    }
}

/*
 * generate of a uniform random number.
 */
uint32_t rnd() {
    const uint32_t A1 = 1664525;
    const uint32_t C1 = 1013904223;
    const uint32_t RAND_MAX1 = 0xFFFFFFFF;
    seed = ((seed * A1 + C1) & RAND_MAX1);
    return seed;
}

/*
 * generate compressible payload sample
 * file_position provides the index of the next data byte (increments by 2 each time the function is called)
 * Hint for compression: view the data distribution (this function implememnts a Box-Muller Transform)
 */
uint16_t file_position = 0;
uint16_t generate_sample_1(){
    if (file_position == 0) {
        seed = DEFAULT_SEED; /* reset seed when exceeding uint16_t max */
    }
    file_position = file_position + 2;
    // if(image_counter == (sizeof(FRAM_write)/sizeof(FRAM_write[0]))){   //1250
    //     return 0xFFFF;
    // }
    // image_counter_1++;
    // return FRAM_write[image_counter];
    return 0x1111;
}

uint16_t generate_sample_2(){
    if (file_position == 0) {
        seed = DEFAULT_SEED; /* reset seed when exceeding uint16_t max */
    }
    file_position = file_position + 2;
    // if(image_counter == (sizeof(FRAM_write)/sizeof(FRAM_write[0]))){
    //     return 0xFFFF;
    // }
    // image_counter++;
    // return FRAM_write[image_counter];
    return 0x2222;
}

/*
 * fill packet with 16-bit samples
 * include_index: shall the file index be included at the first two byte?
 * length: the length of the buffer which can be filled with data
*/
void generate_data_1(uint8_t *buffer, uint8_t length, bool include_index) {
    if(length % 2 != 0){
        puts("WARNING: generate_data has been used with an odd length.");
    }

    uint8_t data_start = 0;
    if(include_index){
        buffer[0]   = (uint8_t) (file_position >> 8);
        buffer[1] = (uint8_t) (file_position & 0x00FF);
        data_start = 2;
    }
    uint8_t i;
    for (i=0; i < length; i=i+2) {
        uint16_t sample = generate_sample_1();
        // printf("%u \n", (unsigned int)sample);
        buffer[i]   = (uint8_t) (sample >> 8);
        buffer[i+1] = (uint8_t) (sample & 0x00FF);
    }
}

void generate_data_2(uint8_t *buffer, uint8_t length, bool include_index) {
    if(length % 2 != 0){
        puts("WARNING: generate_data has been used with an odd length.");
    }

    uint8_t data_start = 0;
    if(include_index){
        buffer[0]   = (uint8_t) (file_position >> 8);
        buffer[1] = (uint8_t) (file_position & 0x00FF);
        data_start = 2;
    }
    uint8_t i;
    for (i=0; i < length; i=i+2) {
        uint16_t sample = generate_sample_2();
        // printf("%u \n", (unsigned int)sample);
        buffer[i]   = (uint8_t) (sample >> 8);
        buffer[i+1] = (uint8_t) (sample & 0x00FF);
    }
}

/* including a header to the packet:
 * - 8B header sequence
 * - 1B payload length
 * - 1B sequence number
 *
 * packet: buffer to be updated with the header
 * seq: sequence number of the packet
 * header_template: obtained using packet_hdr_template()
 */
void add_header(uint8_t *packet, uint8_t seq, uint8_t *header_template) {
    /* fill in the header sequence*/
    int loop;
    for(loop = 0; loop < HEADER_LEN-2; loop++) {
        packet[loop] = header_template[loop];
        }
    /* add the payload length*/
    packet[HEADER_LEN-2] = 1 + PAYLOADSIZE; // The packet length is defined as the payload data, excluding the length byte and the optional CRC. (cc2500 data sheet, p. 30)
    /* add the packet as sequence number. */
    packet[HEADER_LEN-1] = seq;
}

